---
// src/pages/about/index.astro
import Layout from "@layouts/Layout.astro";
import Container from "@components/Container.astro";
import FormattedDate from "@components/FormattedDate.astro";

const currentYear = new Date().getFullYear();
const startYear = 2024;
const experienceYears = currentYear - startYear;
const githubUsername = "Kemeow815"; // 替换为你的 GitHub 用户名

const getStatsURL = (theme = 'light') => {
  return `https://github-readme-stats.vercel.app/api?username=${githubUsername}&show_icons=true&theme=${theme === 'dark' ? 'dark' : 'default'}&include_all_commits=true`;
};

// 根据主题获取活动图 URL
const getActivityURL = (theme = 'light') => {
  return `https://github-readme-activity-graph.vercel.app/graph?username=${githubUsername}&theme=${theme === 'dark' ? 'github-dark' : 'github'}&custom_title=Activity&radius=30&height=300`;
};
---
<Layout title="关于我" description="了解我的背景、技能和经历">
  <Container>
    <div class="animate space-y-16">
      <!-- 头部简介 -->
      <div class="flex flex-col md:flex-row gap-10 items-center">
        <div class="flex-shrink-0">
            <img 
              src="/images/avatar.jpg"
              alt="我的头像" 
              class="rounded-xl w-48 h-48 md:w-56 md:h-56 object-cover border-2 border-gray-200 dark:border-gray-600"
            />
          </div>
        <div class="space-y-4">
          <h1 class="text-4xl font-bold text-black dark:text-white">
            你好，我是<span class="text-blue-600 dark:text-blue-400">克喵爱吃卤面</span>
          </h1>
          <p class="text-xl text-gray-600 dark:text-gray-300">
            资源分享者 & 博客写作者
          </p>
          <div class="prose dark:prose-invert max-w-none">
            <p>
              拥有 {experienceYears} 年的博客写作记录，于去年11月开始接触博客，在<a href="https://t.me/kemiaofx_me" target="_blank" rel="noopener noreferrer">Telegram频道</a>分享资源，同月开始接触博客，
              第一款博客是<a href="https://github.com/ccbikai" target="_blank" rel="noopener noreferrer">面条</a>的<a href="https://github.com/ccbikai/BroadcastChannel" target="_blank" rel="noopener noreferrer">BroadcastChannel</a>博客，
              在那之后部署了各种框架的博客：Hexo、Hugo、Astro等，这个博客就是以Astro框架搭建的。
            </p>
            <p>
              我在这个博客分享我的生活记录、资源分享和踩坑教程，如果我分享的内容侵犯了您的权益，请通过下面的联系方式联系我删除，感谢。
            </p>
          </div>
        </div>
      </div>

      <!-- 时间线 -->
      <div class="space-y-10">
        <h2 class="text-3xl font-bold text-black dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2">
          经历
        </h2>
        
        <div class="relative pl-8 border-l-2 border-gray-200 dark:border-gray-700 space-y-10">
          <!-- 时间线项目 1 -->
          <div class="relative">
            <div class="absolute -left-11 top-1 w-6 h-6 rounded-full bg-blue-500"></div>
            <div class="flex flex-wrap justify-between items-start gap-2">
              <h3 class="text-xl font-bold text-black dark:text-white">博客开始</h3>
              <div class="text-sm text-gray-500 dark:text-gray-400">
                <FormattedDate date={new Date('2024-11-03')} /> - 至今
              </div>
            </div>
            <div class="prose dark:prose-invert mt-2">
              <p>
                开始在博客记录，感谢大家的支持。
              </p>
            </div>
          </div>
          
          <div class="relative">
            <div class="absolute -left-11 top-1 w-6 h-6 rounded-full bg-blue-500"></div>
            <div class="flex flex-wrap justify-between items-start gap-2">
              <h3 class="text-xl font-bold text-black dark:text-white">进入电报</h3>
              <div class="text-sm text-gray-500 dark:text-gray-400">
                <FormattedDate date={new Date('2023-12-01')} /> - 至今
              </div>
            </div>
            <div class="text-lg text-blue-600 dark:text-blue-400">小杯酷安主编</div>
            <div class="prose dark:prose-invert mt-2">
              <p>
                我在12月离开了酷安，为什么呢？因为酷安小编的降智操作，瞎封人号，既没开贴，评论最多也就投币表情，也没逆天发言，而后来到TG(根据某个酷安评论)，
                在这里，我接触到了更多的资源，在<a href="https://t.me/haoruanfenxiang" target="_blank" rel="noopener noreferrer">大佬</a>的影响下开始资源分享。
              </p>
            </div>
          </div>

          <!-- 时间线项目 2 -->
          <div class="relative">
            <div class="absolute -left-11 top-1 w-6 h-6 rounded-full bg-blue-500"></div>
            <div class="flex flex-wrap justify-between items-start gap-2">
              <h3 class="text-xl font-bold text-black dark:text-white">初见酷安</h3>
              <div class="text-sm text-gray-500 dark:text-gray-400">
                <FormattedDate date={new Date('2023-10-15')} /> - <FormattedDate date={new Date('2023-11-31')} />
              </div>
            </div>
            <div class="text-lg text-blue-600 dark:text-blue-400">去广告软件</div>
            <div class="prose dark:prose-invert mt-2">
              <p>
                我接触酷安的最开始是因为上了大学后的必赤大份———PU广告校园，在搜索有什么办法介绍若只开屏的时候意外接触了酷安，后来在这里接触了资源分享，
                在这里学到了很多。
              </p>
            </div>
          </div>
        </div>
      </div>

      <!-- GitHub 贡献图表 -->
      <div class="space-y-10">
        <h2 class="text-3xl font-bold text-black dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2">
          GitHub 贡献
        </h2>
        
        <div class="space-y-12">
          <!-- GitHub 统计卡片 -->
          <div class="bg-white dark:bg-gray-800 rounded-xl p-4 shadow-lg">
            <div class="text-center mb-4">
              <h3 class="text-xl font-bold text-black dark:text-white">
                GitHub 统计
              </h3>
            </div>
            <div class="flex justify-center">
              <img 
                src={getStatsURL('light')}
                data-dark-src={getStatsURL('dark')}
                alt="GitHub Stats" 
                class="w-full max-w-3xl light-image"
              />
            </div>
          </div>
          
          <!-- GitHub 活动图 -->
          <div class="bg-white dark:bg-gray-800 rounded-xl p-4 shadow-lg">
            <div class="text-center mb-4">
              <h3 class="text-xl font-bold text-black dark:text-white">
                贡献活动
              </h3>
            </div>
            <div class="flex justify-center">
              <img 
                src={getActivityURL('light')}
                data-dark-src={getActivityURL('dark')}
                alt="Activity"
                class="w-full max-w-6xl light-image"
              />
            </div>
          </div>
          
          <!-- 修仙系列统计卡片 -->
          <div class="bg-white dark:bg-gray-800 rounded-xl p-4 shadow-lg">
            <div class="text-center mb-4">
              <h3 class="text-xl font-bold text-black dark:text-white">
                编程修仙
              </h3>
            </div>
            <div class="flex justify-center">
              <img 
                src={`https://github-immortality.vercel.app/api?username=${githubUsername}`} 
                alt="修仙系列统计卡片" 
                class="w-full max-w-2xl"
              />
            </div>
          </div>
        </div>
      </div>
      
      <!-- 联系部分 -->
      <div class="space-y-10">
        <h2 class="text-3xl font-bold text-black dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2">
          联系我
        </h2>
        
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
          <a href="mailto:me@kemiaosw.top" class="animate group flex flex-col items-center text-center p-6 border border-gray-200 dark:border-gray-700 rounded-lg hover:shadow-md transition-all">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 text-blue-500 group-hover:text-blue-600 transition-colors" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
            </svg>
            <h3 class="mt-4 text-lg font-semibold text-black dark:text-white">电子邮件</h3>
            <p class="mt-2 text-gray-600 dark:text-gray-300">contact@example.com</p>
          </a>
          
          <a href={`https://github.com/${githubUsername}`} target="_blank" class="animate group flex flex-col items-center text-center p-6 border border-gray-200 dark:border-gray-700 rounded-lg hover:shadow-md transition-all">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 text-blue-500 group-hover:text-blue-600 transition-colors" viewBox="0 0 1024 1024" fill="currentColor">
              <path d="M496 48a448 448 0 1 0 0 896 448 448 0 1 0 0-896z"></path>
              <path d="M496 864a368 368 0 1 1 368-368 368 368 0 0 1-368 368z"></path>
              <path d="M577.28 693.6A176 176 0 0 1 624 800v84c0 8.8 3.68 34.08 14.4 36.96L496 946.88l-144-25.76c11.52-2.56 16-28.32 16-37.12V832c-124.64 27.04-150.4-68.8-150.4-68.8-20.48-51.68-49.76-65.6-49.76-65.6-40.64-27.68 3.04-27.2 3.04-27.2A94.24 94.24 0 0 1 240 716.64c40 68.32 103.04 62.72 128 51.36 4.16-28.96 33.6-62.88 46.4-74.08-99.52-11.36-204.16-49.76-204.16-221.44A173.28 173.28 0 0 1 256 352a161.44 161.44 0 0 1 4.48-118.56s37.6-12 123.2 45.92a425.76 425.76 0 0 1 224 0c85.44-57.92 123.04-45.92 123.04-45.92A161.44 161.44 0 0 1 736 352a173.28 173.28 0 0 1 45.92 120.16c-0.16 172.48-104.8 210.4-204.64 221.44z"></path>
              <path d="M496 32a464 464 0 0 0-152.64 902.08 16 16 0 0 0 8.8 3.04A464 464 0 1 0 496 32zm-116.8 880a99.52 99.52 0 0 0 4.8-27.84v-8.64V832a16 极 16 0 0 0-19.36-16c-107.52 23.36-130.72-54.08-131.68-57.28v-1.76a151.04 151.04 0 0 0-48-67.84 85.92 85.92 0 0 1 40.96 35.2c42.24 72.48 112 74.4 148.8 57.92a16 16 0 0 0 9.28-12.32 137.92 137.92 0 0 1 40.96-64 16 16 0 0 0-8.96-27.84c-93.92-10.72-189.92-43.52-189.92-205.44a157.12 157.12 0 0 1 41.92-109.44 16 16 0 0 0 4-16.96 141.44 141.44 0 0 1 0-97.44c13.6 0 46.72 6.24 102.72 44.16a16 16 0 0 0 13.28 2.24 408.96 408.96 0 0 1 215.68 0 16 16 0 0 0 13.28-2.24c56.16-38.08 89.44-43.84 102.56-44.32a141.92 141.92 0 0 1 1.12 97.6 16 16 0 0 0 3.04 16.8 157.12 157.12 0 0 1 41.76 109.44c0 162.08-96 194.72-190.24 205.12a16 16 0 0 0-8.64 28A163.2 163.2 0 0 1 608 800v84a100.48 100.48 0 0 0 4.64 28 429.76 429.76 0 0 1-233.44 0zm264-9.6a66.08 66.08 0 0 1-3.2-18.08V800a186.56 186.56 0 0 0-32-94.56c88.8-15.04 190.24-61.12 190.24-232.96a188.16 188.16 0 0 0-43.84-123.68 183.04 183.04 0 0 0-7.68-120.96 16 16 0 0 0-9.92-9.28c-4.48-1.44-45.6-12.16-130.88 43.84a441.76 441.76 0 0 0-218.56 0c-85.28-56-126.4-45.28-130.88-43.84a16 16 0 0 0-9.92 9.28 182.72 182.72 0 0 0-7.68 120.96 188 188 0 0 0-43.84 123.68c0 170.4 99.68 217.28 187.68 232.96a152.16 152.16 0 0 0-27.84 50.56c-22.72 6.4-69.44 6.56-100.64-47.04a110.4 110.4 0 0 0-82.4-54.4c-8.64 0-30.4 1.44-35.52 18.08s14.56 32 23.36 38.4l2.08 1.12c0.96 0 24.32 12.8 41.6 56.48 3.68 11.36 35.52 97.6 149.6 82.4v32.96a64 64 0 0 1-3.36 18.08 432 432 0 1 1 294.56 0z"></path>
              <path d="M496 592a16 16 0 0 0-16 16v32a16 16 0 0 0 32 0v-32a16 16 0 0 0-16-16zm73.6 40.48a16 16 0 0 0 30.88-8.48L592 593.28a16 16 0 0 0-30.88 8.32zm-221.6-80.16a16 16 0 0 0-21.92 5.92l-16 27.68a16 16 0 0 0 27.68 16l16-27.68a16 16 0 0 0-5.76-21.92zm306.08 49.6a16 16 0 1 0 27.68-16l-16-27.68a16 16 0 0 0-27.68 16zm-234.72-20a16 16 0 0 0-19.52 11.36L391.52 624a16 16 0 1 0 30.88 8.32l8.32-30.88a16 16 0 0 0-11.36-19.52zM661.6 151.36a363.36 363.36 0 0 0-36.8-16 16 16 0 0 0-11.2 29.92 337.6 337.6 0 0 1 33.6 14.72 16 16 0 0 0 7.2 1.76 16 16 0 0 0 7.2-30.24zm-107.2-34.72a369.28 369.28 0 0 0-240 43.52 16 16 0 0 0 8 29.92 16 16 0 0 0 7.84-2.08 337.6 337.6 0 0 1 219.2-39.68 16 16 0 1 0 5.12-32z"></path>
            </svg>
            <h3 class="mt-4 text-lg font-semibold text-black dark:text-white">GitHub</h3>
            <p class="mt-2 text-gray-600 dark:text-gray-300">@{githubUsername}</p>
          </a>
          
          <a href="https://twitter.com/kemiaosw" target="_blank" class="animate group flex flex-col items-center text-center p-6 border border-gray-200 dark:border-gray-700 rounded-lg hover:shadow-md transition-all">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 text-blue-500 group-hover:text-blue-600 transition-colors" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" />
            </svg>
            <h3 class="mt-4 text-lg font-semibold text-black dark:text-white">社交媒体</h3>
            <p class="mt-2 text-gray-600 dark:text-gray-300">Twitter/LinkedIn</p>
          </a>
          <a href="https://im.qq.com/" target="_blank" class="animate group flex flex-col items-center text-center p-6 border border-gray-200 dark:border-gray-700 rounded-lg hover:shadow-md transition-all">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 text-blue-500 group-hover:text-blue-600 transition-colors" viewBox="0 0 24 24" fill="currentColor">
              <path d="M12.003 2c-5.518 0-9.997 4.48-9.997 9.997 0 5.518 4.48 9.998 9.997 9.998 5.518 0 9.998-4.48 9.998-9.998 0-5.517-4.48-9.997-9.998-9.997zm1.523 13.292c-.507.507-.922.922-1.523.922-.6 0-1.016-.415-1.523-.922l-.922-.922c-.415-.415-.507-.507-1.015 0-.507.507-.415.6 0 1.015l.922.922c.922.922 1.523 1.523 2.538 1.523 1.015 0 1.523-.6 2.538-1.523l.922-.922c.415-.415.507-.507 0-1.015-.507-.507-.6-.415-1.015 0l-.922.922zm-3.046-6.46c.507-.507.922-.922 1.523-.922.6 0 1.016.415 1.523.922l.922.922c.415.415.507.507 1.015 0 .507-.507.415-.6 0-1.015l-.922-.922c-.922-.922-1.523-1.523-2.538-1.523-1.015 0-1.523.6-2.538 1.523l-.922.922c-.415.415-.507.507 0 1.015.507.507.6.415 1.015 0l.922-.922z"/>
            </svg>
            <h3 class="mt-4 text-lg font-semibold text-black dark:text-white">QQ</h3>
            <p class="mt-2 text-gray-600 dark:text-gray-300">123456789</p>
          </a>
          <a href="https://t.me/yourusername" target="_blank" class="animate group flex flex-col items-center text-center p-6 border border-gray-200 dark:border-gray-700 rounded-lg hover:shadow-md transition-all">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 text-blue-500 group-hover:text-blue-600 transition-colors" viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.894 8.221l-1.97 9.28c-.145.658-.537.818-1.084.508l-3-2.21-1.446 1.394c-.14.18-.357.295-.6.295-.002 0-.003 0-.005 0l.213-3.054 5.56-5.022c.24-.213-.054-.334-.373-.121l-6.869 4.326-2.96-.924c-.64-.203-.658-.64.136-.954l11.566-4.458c.538-.196 1.006.128.832.941z"/>
            </svg>
            <h3 class="mt-4 text-lg font-semibold text-black dark:text-white">Telegram</h3>
            <p class="mt-2 text-gray-600 dark:text-gray-300">@kemeow815</p>
          </a>
          <a href="https://space.bilibili.com/yourid" target="_blank" class="animate group flex flex-col items-center text-center p-6 border border-gray-200 dark:border-gray-700 rounded-lg hover:shadow-md transition-all">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 text-blue-500 group-hover:text-blue-600 transition-colors" viewBox="0 0 24 24" fill="currentColor">
              <path d="M18.223 3.086a1.25 1.25 0 010 1.768L17.08 5.996h1.17A3.75 3.75 0 0122 9.747v7.5a3.75 3.75 0 01-3.75 3.75H5.75A3.75 3.75 0 012 17.247v-7.5a3.75 3.75 0 013.75-3.75h1.166L5.775 4.855a1.25 1.25 0 111.768-1.768l2.652 2.652c.079.079.145.165.198.257h3.213c.053-.092.12-.18.199-.258l2.651-2.652a1.25 1.25 0 011.768 0zm.027 5.42H5.75a1.25 1.25 0 00-1.247 1.157l-.003.094v7.5c0 .659.51 1.199 1.157 1.246l.093.004h12.5a1.25 1.25 0 001.247-1.157l.003-.093v-7.5c0-.652-.51-1.2-1.157-1.247l-.093-.003zm-10 2.5c.69 0 1.25.56 1.25 1.25v1.25a1.25 1.25 0 11-2.5 0v-1.25c0-.69.56-1.25 1.25-1.25zm7.5 0c.69 0 1.25.56 1.25 1.25v1.25a1.25 1.25 0 11-2.5 0v-1.25c0-.69.56-1.25 1.25-1.25z"/>
            </svg>
            <h3 class="mt-4 text-lg font-semibold text-black dark:text-white">BiliBili</h3>
            <p class="mt-2 text-gray-600 dark:text-gray-300">Kemeow的频道</p>
          </a>
        </div>
      </div>
    </div>
  </Container>
</Layout>

<style>
  .prose a {
    color: #3b82f6;
    text-decoration: none;
    font-weight: 500;
  }
  .prose a:hover {
    text-decoration: underline;
  }
  .animate {
    animation: fadeIn 0.6s ease-out forwards;
  }
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }
  @media (prefers-reduced-motion) {
    .animate {
      animation: none;
    }
  }
  
  /* 修仙卡片深色模式适配 */
  @media (prefers-color-scheme: dark) {
    img[src*="github-immortality"] {
      filter: invert(0.9) hue-rotate(180deg) brightness(1.1);
    }
  }
</style>

<script>
// 在客户端根据主题切换图片
if (typeof window !== 'undefined') {
  // 检测当前主题
  const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches;

  // 切换 GitHub 统计卡片
  const statsImages = document.querySelectorAll('img[data-dark-src]');

  statsImages.forEach(img => {
    if (!(img instanceof HTMLImageElement)) return; // 类型守卫，确保是图片元素

    if (isDarkMode && img.dataset.darkSrc) {
      img.src = img.dataset.darkSrc;
    } else if (!isDarkMode && img.dataset.src) {
      img.src = img.dataset.src;
    }
  });

  // 监听主题变化
  window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', e => {
    const isDark = e.matches;

    statsImages.forEach(img => {
      if (!(img instanceof HTMLImageElement)) return;

      if (isDark && img.dataset.darkSrc) {
        img.src = img.dataset.darkSrc;
      } else if (!isDark && img.dataset.src) {
        img.src = img.dataset.src;
      }
    });
  });
}
</script>