---
// src/pages/about/index.astro
import Layout from "@layouts/Layout.astro";
import Container from "@components/Container.astro";
import FormattedDate from "@components/FormattedDate.astro";

const currentYear = new Date().getFullYear();
const startYear = 2024;
const experienceYears = currentYear - startYear;
const githubUsername = "Kemeow815"; // 替换为你的 GitHub 用户名

const getStatsURL = (theme = 'light') => {
  return `https://github-readme-stats.vercel.app/api?username=${githubUsername}&show_icons=true&theme=${theme === 'dark' ? 'dark' : 'default'}&include_all_commits=true`;
};

// 根据主题获取活动图 URL
const getActivityURL = (theme = 'light') => {
  return `https://github-readme-activity-graph.vercel.app/graph?username=${githubUsername}&theme=${theme === 'dark' ? 'github-dark' : 'github'}&custom_title=Activity&radius=30&height=300`;
};
---
<Layout title="关于我" description="了解我的背景、技能和经历">
  <Container>
    <div class="animate space-y-16">
      <!-- 头部简介 -->
      <div class="flex flex-col md:flex-row gap-10 items-center">
        <div class="flex-shrink-0">
            <img 
              src="/images/avatar.jpg"
              alt="我的头像" 
              class="rounded-xl w-48 h-48 md:w-56 md:h-56 object-cover border-2 border-gray-200 dark:border-gray-600"
            />
          </div>
        <div class="space-y-4">
          <h1 class="text-4xl font-bold text-black dark:text-white">
            你好，我是<span class="text-blue-600 dark:text-blue-400">克喵爱吃卤面</span>
          </h1>
          <p class="text-xl text-gray-600 dark:text-gray-300">
            资源分享者 & 博客写作者
          </p>
          <div class="prose dark:prose-invert max-w-none">
            <p>
              拥有 {experienceYears} 年的博客写作记录，于去年11月开始接触博客，在<a href="https://t.me/kemiaofx_me" target="_blank" rel="noopener noreferrer">Telegram频道</a>分享资源，同月开始接触博客，
              第一款博客是<a href="https://github.com/ccbikai" target="_blank" rel="noopener noreferrer">面条</a>的<a href="https://github.com/ccbikai/BroadcastChannel" target="_blank" rel="noopener noreferrer">BroadcastChannel</a>博客，
              在那之后部署了各种框架的博客：Hexo、Hugo、Astro等，这个博客就是以Astro框架搭建的。
            </p>
            <p>
              我在这个博客分享我的生活记录、资源分享和踩坑教程，如果我分享的内容侵犯了您的权益，请通过下面的联系方式联系我删除，感谢。
            </p>
          </div>
        </div>
      </div>

      <!-- 时间线 -->
      <div class="space-y-10">
        <h2 class="text-3xl font-bold text-black dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2">
          经历
        </h2>
        
        <div class="relative pl-8 border-l-2 border-gray-200 dark:border-gray-700 space-y-10">
          <!-- 时间线项目 1 -->
          <div class="relative">
            <div class="absolute -left-11 top-1 w-6 h-6 rounded-full bg-blue-500"></div>
            <div class="flex flex-wrap justify-between items-start gap-2">
              <h3 class="text-xl font-bold text-black dark:text-white">博客开始</h3>
              <div class="text-sm text-gray-500 dark:text-gray-400">
                <FormattedDate date={new Date('2024-11-03')} /> - 至今
              </div>
            </div>
            <div class="prose dark:prose-invert mt-2">
              <p>
                开始在博客记录，感谢大家的支持。
              </p>
            </div>
          </div>
          
          <div class="relative">
            <div class="absolute -left-11 top-1 w-6 h-6 rounded-full bg-blue-500"></div>
            <div class="flex flex-wrap justify-between items-start gap-2">
              <h3 class="text-xl font-bold text-black dark:text-white">进入电报</h3>
              <div class="text-sm text-gray-500 dark:text-gray-400">
                <FormattedDate date={new Date('2023-12-01')} /> - 至今
              </div>
            </div>
            <div class="text-lg text-blue-600 dark:text-blue-400">小杯酷安主编</div>
            <div class="prose dark:prose-invert mt-2">
              <p>
                我在12月离开了酷安，为什么呢？因为酷安小编的降智操作，瞎封人号，既没开贴，评论最多也就投币表情，也没逆天发言，而后来到TG(根据某个酷安评论)，
                在这里，我接触到了更多的资源，在<a href="https://t.me/haoruanfenxiang" target="_blank" rel="noopener noreferrer">大佬</a>的影响下开始资源分享。
              </p>
            </div>
          </div>

          <!-- 时间线项目 2 -->
          <div class="relative">
            <div class="absolute -left-11 top-1 w-6 h-6 rounded-full bg-blue-500"></div>
            <div class="flex flex-wrap justify-between items-start gap-2">
              <h3 class="text-xl font-bold text-black dark:text-white">初见酷安</h3>
              <div class="text-sm text-gray-500 dark:text-gray-400">
                <FormattedDate date={new Date('2023-10-15')} /> - <FormattedDate date={new Date('2023-11-31')} />
              </div>
            </div>
            <div class="text-lg text-blue-600 dark:text-blue-400">去广告软件</div>
            <div class="prose dark:prose-invert mt-2">
              <p>
                我接触酷安的最开始是因为上了大学后的必赤大份———PU广告校园，在搜索有什么办法介绍若只开屏的时候意外接触了酷安，后来在这里接触了资源分享，
                在这里学到了很多。
              </p>
            </div>
          </div>
        </div>
      </div>

      <!-- GitHub 贡献图表 -->
      <div class="space-y-10">
        <h2 class="text-3xl font-bold text-black dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2">
          GitHub 贡献
        </h2>
        
        <div class="space-y-12">
          <!-- GitHub 统计卡片 -->
          <div class="bg-white dark:bg-gray-800 rounded-xl p-4 shadow-lg">
            <div class="text-center mb-4">
              <h3 class="text-xl font-bold text-black dark:text-white">
                GitHub 统计
              </h3>
            </div>
            <div class="flex justify-center">
              <img 
                src={getStatsURL('light')}
                data-dark-src={getStatsURL('dark')}
                alt="GitHub Stats" 
                class="w-full max-w-3xl light-image"
              />
            </div>
          </div>
          
          <!-- GitHub 活动图 -->
          <div class="bg-white dark:bg-gray-800 rounded-xl p-4 shadow-lg">
            <div class="text-center mb-4">
              <h3 class="text-xl font-bold text-black dark:text-white">
                贡献活动
              </h3>
            </div>
            <div class="flex justify-center">
              <img 
                src={getActivityURL('light')}
                data-dark-src={getActivityURL('dark')}
                alt="Activity"
                class="w-full max-w-6xl light-image"
              />
            </div>
          </div>
          
          <!-- 修仙系列统计卡片 -->
          <div class="bg-white dark:bg-gray-800 rounded-xl p-4 shadow-lg">
            <div class="text-center mb-4">
              <h3 class="text-xl font-bold text-black dark:text-white">
                编程修仙
              </h3>
            </div>
            <div class="flex justify-center">
              <img 
                src={`https://github-immortality.vercel.app/api?username=${githubUsername}`} 
                alt="修仙系列统计卡片" 
                class="w-full max-w-2xl"
              />
            </div>
          </div>
        </div>
      </div>
      
      <!-- 联系部分 -->
      <div class="space-y-10">
        <h2 class="text-3xl font-bold text-black dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2">
          联系我
        </h2>
        
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
            {/* 邮件链接增强版 */}
            <a href="mailto:me@kemiaosw.top" 
               class="animate group flex flex-col items-center text-center p-6 
                      border border-gray-200 dark:border-gray-700 rounded-lg 
                      hover:shadow-md transition-all duration-300 ease-in-out">
              <svg 
                xmlns="http://www.w3.org/2000/svg" 
                class="h-10 w-10 text-blue-500 group-hover:text-blue-600 
                       transform transition-all duration-300 ease-in-out 
                       group-hover:scale-110 drop-shadow-lg"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                style="-webkit-transform: translate3d(0,0,0); transform: translate3d(0,0,0);"
              >
                <path 
                  stroke-linecap="round" 
                  stroke-linejoin="round" 
                  stroke-width="2" 
                  d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" 
                />
              </svg>
              <h3 class="mt-4 text-lg font-semibold text-black dark:text-white">电子邮件</h3>
              <p class="mt-2 text-gray-600 dark:text-gray-300">me@kemiaosw.top</p>
            </a>
            
            {/* GitHub 链接增强版 */}
            <a href={`https://github.com/${githubUsername}`} 
               target="_blank" 
               class="animate group flex flex-col items-center text-center p-6 
                      border border-gray-200 dark:border-gray-700 rounded-lg 
                      hover:shadow-md transition-all duration-300 ease-in-out">
              <svg 
                xmlns="http://www.w3.org/2000/svg" 
                class="h-10 w-10 text-blue-500 group-hover:text-blue-600 
                       transform transition-all duration-300 ease-in-out 
                       group-hover:scale-110 drop-shadow-lg"
                viewBox="0 0 24 24"
                fill="currentColor"
                stroke="currentColor"
                stroke-width="1.5"
                style="-webkit-transform: translate3d(0,0,0); transform: translate3d(0,0,0);"
              >
                <path 
                  stroke-linecap="round" 
                  stroke-linejoin="round"
                  d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12" 
                  stroke-linecap="round" 
                  stroke-linejoin="round"
                />
              </svg>
              <h3 class="mt-4 text-lg font-semibold text-black dark:text-white">GitHub</h3>
              <p class="mt-2 text-gray-600 dark:text-gray-300">@{githubUsername}</p>
            </a>
          
          <a href="https://twitter.com/kemiaosw" target="_blank" class="animate group flex flex-col items-center text-center p-6 border border-gray-200 dark:border-gray-700 rounded-lg hover:shadow-md transition-all">
            <svg 
              xmlns="http://www.w3.org/2000/svg" 
              class="h-10 w-10 text-blue-500 group-hover:text-blue-600 
                     transform transition-all duration-300 ease-in-out 
                     group-hover:scale-110 drop-shadow-lg"
              viewBox="0 0 1024 1024"
              fill="none"
              style="-webkit-transform: translate3d(0,0,0); transform: translate3d(0,0,0);"
            >
              {/* 增强型 Twitter 鸟类路径 - 带描边效果 */}
              <path 
                d="M906.69132538 328.9547471v-28.60081956c40.04114841-28.60082124 74.36213319-68.64196964 102.96295444-108.68311971-34.32098481 17.16049241-74.36213319 28.60082124-114.4032833 34.32098482 40.04114841-22.88065598 74.36213319-68.64196964 91.5226273-114.4032816-40.04114841 22.88065598-80.08229847 40.04114841-125.8436121 51.48147723-34.32098481-40.04114841-91.52262561-68.64196964-148.72426641-68.64196962-114.40328326 0-200.20574531 91.52262561-200.20574531 211.64607245 0 17.16049241 0 34.32098481 5.72016357 51.48147722-165.8847605-11.44032883-314.6090269-97.24279087-417.57198134-228.80656485-28.60082124 22.88065598-40.04114841 57.20164081-40.04114841 97.24278917 0 74.36213319 34.32098481 143.00410283 91.52262564 183.04525291-34.32098481 0-62.92180605-11.44032883-91.52262564-28.60082123 0 102.96295444 68.64196964 194.48558006 160.16459528 211.64607414-17.16049241 5.72016357-34.32098481 5.72016357-51.48147726 5.72016356-11.44032883 0-22.88065598 0-40.04114836-5.72016356 22.88065598 85.80246203 102.96295444 148.7242681 188.76541646 148.72426639-68.64196964 57.20164081-154.44443167 91.52262561-251.68722253 91.52262731-17.16049241 0-34.32098481 0-45.76131363-5.72016527 91.52262561 62.92180605 194.48558006 97.24279087 308.88886332 97.24279087 371.81066939 11.44032883 577.73657825-314.6090269 577.73657828-594.89707067z" 
                fill="currentColor"
                stroke="currentColor"
                stroke-width="20"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </svg>
            <h3 class="mt-4 text-lg font-semibold text-black dark:text-white">Twitter</h3>
            <p class="mt-2 text-gray-600 dark:text-gray-300">@kemiaosw</p>
          </a>
          
          <a href="https://im.qq.com/" target="_blank" 
          class="animate group flex flex-col items-center text-center p-6 
                 border border-gray-200 dark:border-gray-700 rounded-lg 
                 hover:shadow-md transition-all duration-300 ease-in-out">
         <svg 
           xmlns="http://www.w3.org/2000/svg" 
           class="h-10 w-10 text-blue-500 group-hover:text-blue-600 
                  transform transition-all duration-300 ease-in-out 
                  group-hover:scale-110 drop-shadow-lg"
           viewBox="0 0 1024 1024"
           fill="none"
           stroke="white"
           stroke-width="20"
           style="-webkit-transform: translate3d(0,0,0); transform: translate3d(0,0,0);"
         >
           {/* 优化后的 QQ 图标路径 */}
           <path d="M511.09761 957.257c-80.159 0-153.737-25.019-201.11-62.386-24.057 6.702-54.831 17.489-74.252 30.864-16.617 11.439-14.546 23.106-11.55 27.816 13.15 20.689 225.583 13.211 286.912 6.767v-3.061z" 
             fill="#FAAD08"
             stroke-linecap="round" 
             stroke-linejoin="round"
           />
           <path d="M496.65061 474.524c131.934-0.876 237.669-25.783 273.497-35.34 8.541-2.28 13.11-6.364 13.11-6.364 0.03-1.172 0.542-20.952 0.542-31.155C784.27761 229.833 701.12561 57.173 496.64061 57.162 292.15661 57.173 209.00061 229.832 209.00061 401.665c0 10.203 0.516 29.983 0.547 31.155 0 0 3.717 3.821 10.529 5.67 33.078 8.98 140.803 35.139 276.08 36.034h0.972z" 
             fill="#000000"
             stroke-linecap="round" 
             stroke-linejoin="round"
           />
           <path d="M683.94261 368.627c-7.323-17.609-81.062-37.227-172.353-37.227h-0.98c-91.29 0-165.031 19.618-172.352 37.227a6.244 6.244 0 0 0-0.535 2.505c0 1.269 0.393 2.414 1.006 3.386 6.168 9.765 88.054 58.018 171.882 58.018h0.98c83.827 0 165.71-48.25 171.881-58.016a6.352 6.352 0 0 0 1.002-3.395c0-0.897-0.2-1.736-0.531-2.498" 
             fill="#FAAD08"
             stroke-linecap="round" 
             stroke-linejoin="round"
           />
           <path d="M467.63161 256.377c1.26 15.886-7.377 30-19.266 31.542-11.907 1.544-22.569-10.083-23.836-25.978-1.243-15.895 7.381-30.008 19.25-31.538 11.927-1.549 22.607 10.088 23.852 25.974m73.097 7.935c2.533-4.118 19.827-25.77 55.62-17.886 9.401 2.07 13.75 5.116 14.668 6.316 1.355 1.77 1.726 4.29 0.352 7.684-2.722 6.725-8.338 6.542-11.454 5.226-2.01-0.85-26.94-15.889-49.905 6.553-1.579 1.545-4.405 2.074-7.085 0.242-2.678-1.834-3.786-5.553-2.196-8.135" 
             fill="#000000"
             stroke-linecap="round" 
             stroke-linejoin="round"
           />
         </svg>
         <h3 class="mt-4 text-lg font-semibold text-black dark:text-white">QQ</h3>
         <p class="mt-2 text-gray-600 dark:text-gray-300">3149261770</p>
       </a>

       <a href="https://t.me/KemiaoJun" target="_blank" 
       class="animate group flex flex-col items-center text-center p-6 
              border border-gray-200 dark:border-gray-700 rounded-lg 
              hover:shadow-md transition-all duration-300 ease-in-out">
      <svg 
        xmlns="http://www.w3.org/2000/svg" 
        class="h-10 w-10 text-blue-500 group-hover:text-blue-600 
               transform transition-all duration-300 ease-in-out 
               group-hover:scale-110 drop-shadow-lg"
        viewBox="0 0 1024 1024"
        fill="none"
        stroke="white"
        stroke-width="20"
        style="-webkit-transform: translate3d(0,0,0); transform: translate3d(0,0,0);"
      >
        {/* 精简优化后的 Telegram 图标路径 */}
        <path d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z" 
          fill="#7AA5DA"
          stroke-linecap="round" 
          stroke-linejoin="round"
        />
        <path d="M1023.848 500.154L796.566 273.25l-370.216 451.26 266.568 266.568C886.394 917.976 1024 731.07 1024 512c0-3.962-0.062-7.91-0.152-11.846z" 
          fill="#5786B5"
          stroke-linecap="round" 
          stroke-linejoin="round"
        />
        <path d="M805.05 291.036a29.944 29.944 0 0 1-0.586 7.344l-91.54 437.562c-4.276 20.514-28.376 29.754-45.27 17.342l-138.188-101.434-70.438 71.922c-12.378 12.62-33.72 7.482-39.03-9.344l-50.82-161.324-136.224-40.236c-17.894-5.276-18.928-30.168-1.586-36.96L767.434 267.04c13.17-5.138 26.652 0.482 33.306 10.896a28.836 28.836 0 0 0-4.378-5.206" 
          fill="#FFFFFF"
          stroke-linecap="round" 
          stroke-linejoin="round"
        />
        <path d="M767.434 267.04l-294.03 182.354c-5.964 5.276-12.894-5.038-7.724-10.378l294.03-182.354c6.482-4.06 13.17 0.518 13.17 7.342z" 
          fill="#ADBCC9"
          stroke-linecap="round" 
          stroke-linejoin="round"
        />
      </svg>
      <h3 class="mt-4 text-lg font-semibold text-black dark:text-white">Telegram</h3>
      <p class="mt-2 text-gray-600 dark:text-gray-300">@KemiaoJun</p>
    </a>

    <a href="https://space.bilibili.com/yourid" target="_blank" 
    class="animate group flex flex-col items-center text-center p-6 
           border border-gray-200 dark:border-gray-700 rounded-lg 
           hover:shadow-md transition-all duration-300 ease-in-out">
   <svg 
     xmlns="http://www.w3.org/2000/svg" 
     class="h-10 w-10 text-blue-500 group-hover:text-blue-600 
            transform transition-all duration-300 ease-in-out 
            group-hover:scale-110 drop-shadow-lg"
     viewBox="0 0 1024 1024"
     fill="none"
     stroke="white"
     stroke-width="20"
     style="-webkit-transform: translate3d(0,0,0); transform: translate3d(0,0,0);"
   >
     {/* 优化后的 Bilibili 图标路径 */}
     <path d="M511.219 510.612m-506.88 0a506.88 506.88 0 1 0 1013.76 0 506.88 506.88 0 1 0-1013.76 0Z" 
       fill="#0D2485"
       stroke-linecap="round" 
       stroke-linejoin="round"
     />
     <path d="M723.674 150.824a43.373 48.103 0 0 1 0 68.037l-39.66 43.947h40.597a130.118 144.31 0 0 1 130.117 144.348v288.619a130.118 144.31 0 0 1-130.117 144.31H290.886a130.118 144.31 0 0 1-130.118-144.31V407.156a130.118 144.31 0 0 1 130.118-144.31h40.457l-39.59-43.947a43.373 48.103 0 1 1 61.312-68.037l92.019 102.056a47.282 47.282 0 0 1 6.87 9.89h111.485c1.839-3.54 4.163-6.927 6.904-9.929l91.985-102.055a43.373 48.103 0 0 1 61.346 0z" 
       fill="#FFFFFF"
       stroke-linecap="round" 
       stroke-linejoin="round"
     />
     <path d="M329.946 528.912a61.831 94.373 0 1 0 123.662 0 61.831 94.373 0 1 0-123.662 0Z" 
       fill="#FFD400"
       stroke-linecap="round" 
       stroke-linejoin="round"
     />
   </svg>
   <h3 class="mt-4 text-lg font-semibold text-black dark:text-white">BiliBili</h3>
   <p class="mt-2 text-gray-600 dark:text-gray-300">Kemeow的频道</p>
 </a>
        </div>
      </div>
    </div>
  </Container>
</Layout>

<style>
  .prose a {
    color: #3b82f6;
    text-decoration: none;
    font-weight: 500;
  }
  .prose a:hover {
    text-decoration: underline;
  }
  .animate {
    animation: fadeIn 0.6s ease-out forwards;
  }
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }
  @media (prefers-reduced-motion) {
    .animate {
      animation: none;
    }
  }
  
  /* 修仙卡片深色模式适配 */
  @media (prefers-color-scheme: dark) {
    img[src*="github-immortality"] {
      filter: invert(0.9) hue-rotate(180deg) brightness(1.1);
    }
  }
</style>

<script>
// 在客户端根据主题切换图片
if (typeof window !== 'undefined') {
  // 检测当前主题
  const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches;

  // 切换 GitHub 统计卡片
  const statsImages = document.querySelectorAll('img[data-dark-src]');

  statsImages.forEach(img => {
    if (!(img instanceof HTMLImageElement)) return; // 类型守卫，确保是图片元素

    if (isDarkMode && img.dataset.darkSrc) {
      img.src = img.dataset.darkSrc;
    } else if (!isDarkMode && img.dataset.src) {
      img.src = img.dataset.src;
    }
  });

  // 监听主题变化
  window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', e => {
    const isDark = e.matches;

    statsImages.forEach(img => {
      if (!(img instanceof HTMLImageElement)) return;

      if (isDark && img.dataset.darkSrc) {
        img.src = img.dataset.darkSrc;
      } else if (!isDark && img.dataset.src) {
        img.src = img.dataset.src;
      }
    });
  });
}
</script>